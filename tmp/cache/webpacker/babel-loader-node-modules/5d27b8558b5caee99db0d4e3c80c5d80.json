{"ast":null,"code":"import { addmuted, unmute } from './index';\nimport { popWindows, popChoise, pop404 } from '../popWindows/popWindows';\nvar format = /[ `!@#$%^&*()_+\\-=\\[\\]{};':\"\\\\|,.<>\\/?~]/;\nexport function sendMessage(player, token, roomname, anagram) {\n  var message = $('#Message').val().trim();\n\n  if (message) {\n    var splitted = message.split(/\\s+/);\n    if (splitted[0][0] == '\\\\') isspecial(splitted, player, token, roomname, message, anagram);else $.ajax({\n      url: 'message/chatroom',\n      data: {\n        roomname: roomname,\n        speudo: player,\n        anagram: anagram,\n        content: message,\n        authenticity_token: token\n      },\n      type: \"POST\"\n    });\n    $('#Message').val('');\n  }\n}\n\nfunction isspecial(splitted, player, token, roomname, message, anagram) {\n  addtext('pink', message);\n\n  for (var i = 1; i < splitted.length; i++) {\n    if (format.test(splitted[i])) {\n      popWindows('bad input');\n      return;\n    }\n  }\n\n  if (splitted[0] == \"\\\\pm\") sendPm(splitted, player, token, roomname, anagram);\n  if (splitted[0] == \"\\\\mute\") sendMute(splitted, player, token, roomname);\n  if (splitted[0] == \"\\\\unmute\") sendUnmute(splitted, player, token, roomname);\n  if (splitted[0] == \"\\\\game\") sendGame(splitted, player, token, roomname, anagram);\n  if (splitted[0] == \"\\\\profile\") sendProfile(splitted, player, token, roomname);\n  if (splitted[0] == \"\\\\ban\") sendBan(splitted, player, token, roomname);\n  if (splitted[0] == \"\\\\unban\") sendUnban(splitted, player, token, roomname);\n  if (splitted[0] == \"\\\\admin\") sendAdmin(splitted, player, token, roomname);\n  if (splitted[0] == \"\\\\password\") sendPass(splitted, player, token, roomname);\n  if (splitted[0] == \"\\\\unpassword\") sendUnpass(player, token, roomname);\n  if (splitted[0] == \"\\\\destroy\") sendDestroy(player, token, roomname);\n  if (splitted[0] == \"\\\\unadmin\") sendUnadmin(splitted, player, token, roomname);\n}\n\nfunction sendGame(splitted, player, token, roomname, anagram) {\n  if (!splitted[1]) popWindows('challenger impossible');else $.ajax({\n    url: 'roomchat/game',\n    data: {\n      roomname: roomname,\n      player: player,\n      enemy: splitted[1],\n      authenticity_token: token\n    },\n    type: \"POST\",\n    success: function success(data) {\n      if (data.content == true) addtext('pink', \"challenge have been send to \" + splitted[1]);else addtext('pink', data.message);\n    }\n  });\n}\n\nfunction sendUnpass(player, token, roomname) {\n  $.ajax({\n    url: 'roomchat/password',\n    data: {\n      roomname: roomname,\n      owner: player,\n      authenticity_token: token\n    },\n    type: \"POST\",\n    success: function success(data) {\n      if (data.content == true) addtext('pink', \"password have been removed \");else addtext('pink', \"you are not the owner of the room\");\n    }\n  });\n}\n\nfunction sendPass(splitted, player, token, roomname) {\n  if (!splitted[1]) popWindows('password impossible');else $.ajax({\n    url: 'roomchat/password',\n    data: {\n      roomname: roomname,\n      owner: player,\n      password: splitted[1],\n      authenticity_token: token\n    },\n    type: \"POST\",\n    success: function success(data) {\n      if (data.content == true) addtext('pink', \"password have been changed \");else addtext('pink', \"you are not the owner of the room\");\n    }\n  });\n}\n\nfunction sendAdmin(splitted, player, token, roomname) {\n  if (!splitted[1]) popWindows('admin impossible');else $.ajax({\n    url: 'roomchat/admin',\n    data: {\n      roomname: roomname,\n      owner: player,\n      admin: splitted[1],\n      authenticity_token: token\n    },\n    type: \"POST\",\n    success: function success(data) {\n      if (data.content == true) addtext('pink', splitted[1] + \" have been promoted to admin\");else addtext('pink', \"you are not the owner of the room\");\n    }\n  });\n}\n\nfunction sendUnadmin(splitted, player, token, roomname) {\n  if (!splitted[1]) popWindows('unadmin impossible');else $.ajax({\n    url: 'roomchat/unadmin',\n    data: {\n      roomname: roomname,\n      owner: player,\n      admin: splitted[1],\n      authenticity_token: token\n    },\n    type: \"POST\",\n    success: function success(data) {\n      if (data.content == true) addtext('pink', splitted[1] + \" have been remove from the admin\");else addtext('pink', \"you are not the owner of the room\");\n    }\n  });\n}\n\nfunction sendMute(splitted, player, token, roomname) {\n  if (!splitted[1]) popWindows('mute impossible');else $.ajax({\n    url: 'personal/mute',\n    data: {\n      roomname: roomname,\n      speudo: player,\n      mute: splitted[1],\n      authenticity_token: token\n    },\n    type: \"POST\",\n    success: function success(data) {\n      if (data.content == true) addtext('pink', splitted[1] + \" have been muted\");\n      addmuted(splitted[1]);\n    }\n  });\n}\n\nfunction sendUnmute(splitted, player, token, roomname) {\n  if (!splitted[1]) popWindows('unmute impossible');else $.ajax({\n    url: 'personal/unmute',\n    data: {\n      roomname: roomname,\n      speudo: player,\n      unmute: splitted[1],\n      authenticity_token: token\n    },\n    type: \"POST\",\n    success: function success(data) {\n      if (data.content == true) addtext('pink', splitted[1] + \" have been unmuted\");else addtext('pink', splitted[1] + \" was not muted\");\n      unmute(splitted[1]);\n    }\n  });\n}\n\nfunction sendPm(splitted, player, token, roomname, anagram) {\n  var content = unsplit(splitted);\n  if (!splitted[1]) popWindows('pm impossible');else $.ajax({\n    url: 'personal/pm',\n    data: {\n      roomname: roomname,\n      speudo: player,\n      anagram: anagram,\n      receive: splitted[1],\n      content: content,\n      authenticity_token: token\n    },\n    type: \"POST\"\n  });\n}\n\nfunction sendProfile(splitted, player, token, roomname) {\n  if (!splitted[1]) popWindows('mute impossible');else $.ajax({\n    url: 'personal/profile',\n    data: {\n      roomname: roomname,\n      speudo: player,\n      profile: splitted[1],\n      authenticity_token: token\n    },\n    type: \"POST\",\n    success: function success(data) {\n      if (data.error) {\n        pop404();\n        addtext(\"pink\", \"no user with this name\");\n      } else addtext('red', \"Profile of : \" + data.username + \" status \" + data.status + \" \" + \"rank : \" + data.rank + \" guild_id : \" + data.guild_id);\n    }\n  });\n}\n\nfunction sendBan(splitted, player, token, roomname) {\n  if (!splitted[1]) popWindows('ban impossible');else $.ajax({\n    url: 'roomchat/ban',\n    data: {\n      roomname: roomname,\n      admin: player,\n      banspeudo: splitted[1],\n      time: splitted[2],\n      authenticity_token: token\n    },\n    type: \"POST\"\n  });\n}\n\nfunction sendUnban(splitted, player, token, roomname) {\n  if (!splitted[1]) popWindows('ban impossible');else $.ajax({\n    url: 'roomchat/unban',\n    data: {\n      roomname: roomname,\n      admin: player,\n      banspeudo: splitted[1],\n      authenticity_token: token\n    },\n    type: \"POST\"\n  });\n}\n\nfunction sendDestroy(player, token, roomname) {\n  $.ajax({\n    url: 'roomchat/destroy',\n    data: {\n      roomname: roomname,\n      username: player,\n      authenticity_token: token\n    },\n    type: \"POST\"\n  });\n}\n\nfunction addtext(color, content) {\n  var chat = document.getElementById('messagerie');\n  chat.innerHTML += \"<p style='color:\" + color + \";'>\" + content + \"</p><hr/>\";\n  chat.scrollTop = chat.scrollHeight;\n}\n\nfunction unsplit(splitted) {\n  var ret = '';\n\n  for (var i = 2; i < splitted.length; i++) {\n    ret += ' ' + splitted[i];\n  }\n\n  return ret;\n}","map":{"version":3,"sources":["/pong_rails/app/javascript/chat/sendMessage.js"],"names":["addmuted","unmute","popWindows","popChoise","pop404","format","sendMessage","player","token","roomname","anagram","message","$","val","trim","splitted","split","isspecial","ajax","url","data","speudo","content","authenticity_token","type","addtext","i","length","test","sendPm","sendMute","sendUnmute","sendGame","sendProfile","sendBan","sendUnban","sendAdmin","sendPass","sendUnpass","sendDestroy","sendUnadmin","enemy","success","owner","password","admin","mute","unsplit","receive","profile","error","username","status","rank","guild_id","banspeudo","time","color","chat","document","getElementById","innerHTML","scrollTop","scrollHeight","ret"],"mappings":"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","sourcesContent":["import {addmuted, unmute} from './index'\nimport {popWindows, popChoise, pop404} from '../popWindows/popWindows'\n\nvar format = /[ `!@#$%^&*()_+\\-=\\[\\]{};':\"\\\\|,.<>\\/?~]/;\n\n\nexport function sendMessage(player, token, roomname, anagram){\n\tvar message = $('#Message').val().trim()\n\t\n\tif (message) {\n\n\t\tvar splitted = message.split(/\\s+/);\n\n\t\tif (splitted[0][0] == '\\\\')\n\t\t\tisspecial(splitted, player, token, roomname, message, anagram)\n\t\telse\n\t\t\t$.ajax({\n\t\t\t\turl: 'message/chatroom',\n\t\t\t\tdata: {\n\t\t\t\t\troomname: roomname,\n\t\t\t\t\tspeudo: player,\n\t\t\t\t\tanagram: anagram,\n\t\t\t\t\tcontent: message,\n\t\t\t\t\tauthenticity_token: token\n\t\t\t\t},\n\t\t\t\ttype: \"POST\"\n\t\t\t})\n\t\t$('#Message').val('');\n\t}\n}\n\nfunction isspecial(splitted, player, token, roomname, message, anagram){\n\n\taddtext('pink', message)\n\t\n\tfor (var i =1; i < splitted.length; i++)\n\t\tif (format.test(splitted[i])){\n\t\t\tpopWindows('bad input')\n\t\t\treturn;\n\t\t}\n\tif (splitted[0] == \"\\\\pm\")\n\t\tsendPm(splitted, player, token, roomname, anagram)\n\n\tif (splitted[0] == \"\\\\mute\")\n\t\tsendMute(splitted, player, token, roomname)\n\n\tif (splitted[0] == \"\\\\unmute\")\n\t\tsendUnmute(splitted, player, token, roomname)\n\n\tif (splitted[0] == \"\\\\game\")\n\t\tsendGame(splitted,player, token, roomname, anagram)\n\n\tif (splitted[0] == \"\\\\profile\")\n\t\tsendProfile(splitted, player, token, roomname)\n\n\tif (splitted[0] == \"\\\\ban\")\n\t\tsendBan(splitted, player, token, roomname)\n\n\tif (splitted[0] == \"\\\\unban\")\n\t\tsendUnban(splitted, player, token, roomname)\n\n\tif (splitted[0] == \"\\\\admin\")\n\t\tsendAdmin(splitted, player, token, roomname)\n\n\tif (splitted[0] == \"\\\\password\")\n\t\tsendPass(splitted, player, token, roomname)\n\n\tif (splitted[0] == \"\\\\unpassword\")\n\t\tsendUnpass(player, token, roomname)\n\n\tif (splitted[0] == \"\\\\destroy\")\n\t\tsendDestroy(player, token, roomname)\n\t\t\n\tif (splitted[0] == \"\\\\unadmin\")\n\t\tsendUnadmin(splitted, player, token, roomname)}\n\nfunction sendGame(splitted, player, token, roomname, anagram) {\n\n\tif (!splitted[1])\n\t\tpopWindows('challenger impossible')\n\telse\n\t\t$.ajax({\n\t\t\turl: 'roomchat/game',\n\t\t\tdata: {\n\t\t\t\troomname: roomname,\n\t\t\t\tplayer: player,\n\t\t\t\tenemy: splitted[1],\n\t\t\t\tauthenticity_token: token\n\t\t\t},\n\t\t\ttype: \"POST\",\n\t\t\tsuccess: function (data) {\n\t\t\t\tif (data.content == true)\n\t\t\t\t\taddtext('pink', \"challenge have been send to \" + splitted[1])\n\t\t\t\telse\n\t\t\t\t\taddtext('pink', data.message)\n\t\t\t}\n\t\t})\n}\n\nfunction sendUnpass(player, token, roomname) {\n\t\n\t\t$.ajax({\n\t\t\turl: 'roomchat/password',\n\t\t\tdata: {\n\t\t\t\troomname: roomname,\n\t\t\t\towner: player,\n\t\t\t\tauthenticity_token: token\n\t\t\t},\n\t\t\ttype: \"POST\",\n\t\t\tsuccess: function (data) {\n\t\t\t\tif (data.content == true)\n\t\t\t\t\taddtext('pink', \"password have been removed \")\n\t\t\t\telse\n\t\t\t\t\taddtext('pink', \"you are not the owner of the room\")\n\t\t\t}\n\t\t})\n}\n\nfunction sendPass(splitted, player, token, roomname) {\n\n\tif (!splitted[1])\n\t\tpopWindows('password impossible')\n\telse\n\t\t$.ajax({\n\t\t\turl: 'roomchat/password',\n\t\t\tdata: {\n\t\t\t\troomname: roomname,\n\t\t\t\towner: player,\n\t\t\t\tpassword: splitted[1],\n\t\t\t\tauthenticity_token: token\n\t\t\t},\n\t\t\ttype: \"POST\",\n\t\t\tsuccess: function (data) {\n\t\t\t\tif (data.content == true)\n\t\t\t\t\taddtext('pink', \"password have been changed \")\n\t\t\t\telse\n\t\t\t\t\taddtext('pink', \"you are not the owner of the room\")\n\t\t\t}\n\t\t})\n}\n\nfunction sendAdmin(splitted, player, token, roomname){\n\n\tif (!splitted[1])\n\t\tpopWindows('admin impossible')\n\telse\n\t\t$.ajax({\n\t\t\turl: 'roomchat/admin',\n\t\t\tdata: {\n\t\t\t\troomname: roomname,\n\t\t\t\towner: player,\n\t\t\t\tadmin: splitted[1],\n\t\t\t\tauthenticity_token: token\n\t\t\t},\n\t\t\ttype: \"POST\",\n\t\t\tsuccess: function(data){\n\t\t\t\tif (data.content == true)\n\t\t\t\t\t\taddtext('pink', splitted[1] + \" have been promoted to admin\")\n\t\t\t\telse\n\t\t\t\t\t\taddtext('pink', \"you are not the owner of the room\")\n\t\t\t}\n\t\t})\n}\n\nfunction sendUnadmin(splitted, player, token, roomname){\n\n\tif (!splitted[1])\n\t\tpopWindows('unadmin impossible')\n\telse\n\t\t$.ajax({\n\t\t\turl: 'roomchat/unadmin',\n\t\t\tdata: {\n\t\t\t\troomname: roomname,\n\t\t\t\towner: player,\n\t\t\t\tadmin: splitted[1],\n\t\t\t\tauthenticity_token: token\n\t\t\t},\n\t\t\ttype: \"POST\",\n\t\t\tsuccess: function(data){\n\t\t\t\tif (data.content == true)\n\t\t\t\t\t\taddtext('pink', splitted[1] + \" have been remove from the admin\")\n\t\t\t\telse\n\t\t\t\t\t\taddtext('pink', \"you are not the owner of the room\")\n\t\t\t}\n\t\t})\n}\n\nfunction sendMute(splitted, player, token, roomname){\n\n\tif (!splitted[1])\n\t\tpopWindows('mute impossible')\n\telse\n\t\t$.ajax({\n\t\t\turl: 'personal/mute',\n\t\t\tdata: {\n\t\t\t\troomname: roomname,\n\t\t\t\tspeudo: player,\n\t\t\t\tmute: splitted[1],\n\t\t\t\tauthenticity_token: token\n\t\t\t},\n\t\t\ttype: \"POST\",\n\t\t\tsuccess: function(data){\n\t\t\t\tif (data.content == true)\n\t\t\t\t\t\taddtext('pink', splitted[1] + \" have been muted\")\n\t\t\t\taddmuted(splitted[1])\n\t\t\t}\n\t\t})\n}\n\nfunction sendUnmute(splitted, player, token, roomname){\n\n\tif (!splitted[1])\n\t\tpopWindows('unmute impossible')\n\telse\n\t\t$.ajax({\n\t\t\turl: 'personal/unmute',\n\t\t\tdata: {\n\t\t\t\troomname: roomname,\n\t\t\t\tspeudo: player,\n\t\t\t\tunmute: splitted[1],\n\t\t\t\tauthenticity_token: token\n\t\t\t},\n\t\t\ttype: \"POST\",\n\t\t\tsuccess: function(data){\n\t\t\t\tif (data.content == true)\n\t\t\t\t\taddtext('pink', splitted[1] + \" have been unmuted\")\n\t\t\t\telse\n\t\t\t\t\taddtext('pink', splitted[1] + \" was not muted\")\n\t\t\t\tunmute(splitted[1])\n\t\t\t}\n\t\t})\n}\n\nfunction sendPm(splitted, player, token, roomname, anagram){\n\t\n\tvar content = unsplit(splitted)\n\n\tif (!splitted[1])\n\t\tpopWindows('pm impossible')\n\telse\n\t\t$.ajax({\n\t\t\turl: 'personal/pm',\n\t\t\tdata: {\n\t\t\t\troomname: roomname,\n\t\t\t\tspeudo: player,\n\t\t\t\tanagram: anagram,\n\t\t\t\treceive: splitted[1],\n\t\t\t\tcontent: content,\n\t\t\t\tauthenticity_token: token\n\t\t\t},\n\t\t\ttype: \"POST\"\n\t\t})\n}\n\nfunction sendProfile(splitted, player, token, roomname){\n\n\tif (!splitted[1])\n\t\tpopWindows('mute impossible')\n\telse\n\t\t$.ajax({\n\t\t\turl: 'personal/profile',\n\t\t\tdata: {\n\t\t\t\troomname: roomname,\n\t\t\t\tspeudo: player,\n\t\t\t\tprofile: splitted[1],\n\t\t\t\tauthenticity_token: token\n\t\t\t},\n\t\t\ttype: \"POST\",\n\t\t\tsuccess: function(data){\n\t\t\t\tif (data.error){\n\t\t\t\t\tpop404()\n\t\t\t\t\taddtext(\"pink\", \"no user with this name\");\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\taddtext('red', \t\"Profile of : \" + data.username + \" status \" + data.status + \" \"+ \n\t\t\t\t\t\t\t\t\t\"rank : \" + data.rank + \" guild_id : \" + data.guild_id \n\t\t\t\t\t)\n\t\t\t}\n\t\t})\n}\n\nfunction sendBan(splitted, player, token, roomname){\n\n\tif (!splitted[1])\n\t\tpopWindows('ban impossible')\n\telse\n\t\t$.ajax({\n\t\t\turl: 'roomchat/ban',\n\t\t\tdata: {\n\t\t\t\troomname: roomname,\n\t\t\t\tadmin: player,\n\t\t\t\tbanspeudo: splitted[1],\n\t\t\t\ttime: splitted[2],\n\t\t\t\tauthenticity_token: token\n\t\t\t},\n\t\t\ttype: \"POST\"\n\t\t})\n}\n\nfunction sendUnban(splitted, player, token, roomname){\n\n\tif (!splitted[1])\n\t\tpopWindows('ban impossible')\n\telse\n\t\t$.ajax({\n\t\t\turl: 'roomchat/unban',\n\t\t\tdata: {\n\t\t\t\troomname: roomname,\n\t\t\t\tadmin: player,\n\t\t\t\tbanspeudo: splitted[1],\n\t\t\t\tauthenticity_token: token\n\t\t\t},\n\t\t\ttype: \"POST\"\n\t\t})\n}\n\nfunction sendDestroy(player, token, roomname){\n\n\t\t$.ajax({\n\t\t\turl: 'roomchat/destroy',\n\t\t\tdata: {\n\t\t\t\troomname: roomname,\n\t\t\t\tusername: player,\n\t\t\t\tauthenticity_token: token\n\t\t\t},\n\t\t\ttype: \"POST\"\n\t\t})\n}\n\nfunction addtext(color, content){\n\tlet chat = document.getElementById('messagerie')\n\tchat.innerHTML += \"<p style='color:\"+ color +\";'>\" +content + \"</p><hr/>\";\n\tchat.scrollTop = chat.scrollHeight;\n}\n\nfunction unsplit(splitted){\n\n\tvar ret= '';\n\tfor(var i=2; i < splitted.length;i++)\n\t\tret += ' ' + splitted[i];\n\treturn ret\n}"]},"metadata":{},"sourceType":"module"}