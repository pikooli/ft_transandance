{"ast":null,"code":"/* --- chat --- */\nimport { unsubAll } from '../chat/index';\n/* ------------ */\n\nvar TOURNAMENT = {};\nTOURNAMENT.rank1 = new Backbone.Collection();\nTOURNAMENT.rank2 = new Backbone.Collection();\nTOURNAMENT.rank3 = new Backbone.Collection();\nTOURNAMENT.rank4 = new Backbone.Collection();\nTOURNAMENT.rank5 = new Backbone.Collection();\nTOURNAMENT.ModelMatch = Backbone.Model.extend({\n  url: function url() {\n    return \"/tournament/match\";\n  }\n});\nTOURNAMENT.match = new TOURNAMENT.ModelMatch();\nTOURNAMENT.ViewLadder = Backbone.View.extend({\n  template: _.template(\"<li><%- username %></li>\"),\n  initialize: function initialize() {\n    TOURNAMENT.rank1.on(\"sync\", this.renderRank1, this);\n    TOURNAMENT.rank2.on(\"sync\", this.renderRank2, this);\n    TOURNAMENT.rank3.on(\"sync\", this.renderRank3, this);\n    TOURNAMENT.rank4.on(\"sync\", this.renderRank4, this);\n    TOURNAMENT.rank5.on(\"sync\", this.renderRank5, this);\n    TOURNAMENT.rank1.fetch({\n      url: \"/tournament/rank/1\"\n    });\n    TOURNAMENT.rank2.fetch({\n      url: \"/tournament/rank/2\"\n    });\n    TOURNAMENT.rank3.fetch({\n      url: \"/tournament/rank/3\"\n    });\n    TOURNAMENT.rank4.fetch({\n      url: \"/tournament/rank/4\"\n    });\n    TOURNAMENT.rank5.fetch({\n      url: \"/tournament/rank/5\"\n    });\n  },\n  renderRank1: function renderRank1() {\n    var el = this.$(\"#rank1\");\n    var array = TOURNAMENT.rank1.pluck(\"username\");\n    el.html(\"\");\n\n    for (var index = 0; index < array.length; ++index) {\n      el.append(this.template({\n        username: array[index]\n      }));\n    }\n  },\n  renderRank2: function renderRank2() {\n    var el = this.$(\"#rank2\");\n    var array = TOURNAMENT.rank2.pluck(\"username\");\n    el.html(\"\");\n\n    for (var index = 0; index < array.length; ++index) {\n      el.append(this.template({\n        username: array[index]\n      }));\n    }\n  },\n  renderRank3: function renderRank3() {\n    var el = this.$(\"#rank3\");\n    var array = TOURNAMENT.rank3.pluck(\"username\");\n    el.html(\"\");\n\n    for (var index = 0; index < array.length; ++index) {\n      el.append(this.template({\n        username: array[index]\n      }));\n    }\n  },\n  renderRank4: function renderRank4() {\n    var el = this.$(\"#rank4\");\n    var array = TOURNAMENT.rank4.pluck(\"username\");\n    el.html(\"\");\n\n    for (var index = 0; index < array.length; ++index) {\n      el.append(this.template({\n        username: array[index]\n      }));\n    }\n  },\n  renderRank5: function renderRank5() {\n    var el = this.$(\"#rank5\");\n    var array = TOURNAMENT.rank5.pluck(\"username\");\n    el.html(\"\");\n\n    for (var index = 0; index < array.length; ++index) {\n      el.append(this.template({\n        username: array[index]\n      }));\n    }\n  }\n});\nTOURNAMENT.ViewMatch = Backbone.View.extend({\n  events: {\n    \"click input[value='Play']\": \"requestMatch\"\n  },\n  template: _.template(\"<%- text %>\"),\n  initialize: function initialize() {\n    this.model.on(\"sync\", this.render, this);\n  },\n  render: function render() {\n    this.$(\"p\").html(this.template(this.model.attributes));\n  },\n  requestMatch: function requestMatch() {\n    this.model.fetch();\n  }\n});\nTOURNAMENT.View = Backbone.View.extend({\n  el: $(\"#main\"),\n  initialize: function initialize() {\n    this.$el.html($(\"#tournamentTemplate\").html());\n    new TOURNAMENT.ViewLadder({\n      el: this.$(\"#tournamentRanks\")\n    });\n    new TOURNAMENT.ViewMatch({\n      el: this.$(\"#tournamentMatch\"),\n      model: TOURNAMENT.match\n    });\n  }\n});\n\nTOURNAMENT.display = function () {\n  window.location.hash = \"#tournament\";\n  /* --- chat --- */\n\n  unsubAll();\n  /* ------------ */\n\n  new TOURNAMENT.View();\n};\n\n$(\"#nav input[value='Tournament']\").on(\"click\", TOURNAMENT.display);\nexport default TOURNAMENT;","map":{"version":3,"sources":["/pong_rails/app/javascript/nav/tournament.js"],"names":["unsubAll","TOURNAMENT","rank1","Backbone","Collection","rank2","rank3","rank4","rank5","ModelMatch","Model","extend","url","match","ViewLadder","View","template","_","initialize","on","renderRank1","renderRank2","renderRank3","renderRank4","renderRank5","fetch","el","$","array","pluck","html","index","length","append","username","ViewMatch","events","model","render","attributes","requestMatch","$el","display","window","location","hash"],"mappings":"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","sourcesContent":["/* --- chat --- */\nimport {unsubAll} from '../chat/index'\n/* ------------ */\n\nlet TOURNAMENT = {};\n\nTOURNAMENT.rank1 = new Backbone.Collection();\nTOURNAMENT.rank2 = new Backbone.Collection();\nTOURNAMENT.rank3 = new Backbone.Collection();\nTOURNAMENT.rank4 = new Backbone.Collection();\nTOURNAMENT.rank5 = new Backbone.Collection();\n\nTOURNAMENT.ModelMatch = Backbone.Model.extend({\n\turl: function() {\n\t\treturn \"/tournament/match\";\n\t}\n});\nTOURNAMENT.match = new TOURNAMENT.ModelMatch();\n\nTOURNAMENT.ViewLadder = Backbone.View.extend({\n\ttemplate: _.template(\"<li><%- username %></li>\"),\n\tinitialize: function() {\n\t\tTOURNAMENT.rank1.on(\"sync\", this.renderRank1, this);\n\t\tTOURNAMENT.rank2.on(\"sync\", this.renderRank2, this);\n\t\tTOURNAMENT.rank3.on(\"sync\", this.renderRank3, this);\n\t\tTOURNAMENT.rank4.on(\"sync\", this.renderRank4, this);\n\t\tTOURNAMENT.rank5.on(\"sync\", this.renderRank5, this);\n\n\t\tTOURNAMENT.rank1.fetch({ url: \"/tournament/rank/1\" });\n\t\tTOURNAMENT.rank2.fetch({ url: \"/tournament/rank/2\" });\n\t\tTOURNAMENT.rank3.fetch({ url: \"/tournament/rank/3\" });\n\t\tTOURNAMENT.rank4.fetch({ url: \"/tournament/rank/4\" });\n\t\tTOURNAMENT.rank5.fetch({ url: \"/tournament/rank/5\" });\n\t},\n\trenderRank1: function() {\n\t\tlet el = this.$(\"#rank1\");\n\t\tlet array = TOURNAMENT.rank1.pluck(\"username\");\n\t\tel.html(\"\");\n\t\tfor (let index = 0; index < array.length; ++index) {\n\t\t\tel.append(this.template({ username: array[index] }));\n\t\t}\n\t},\n\trenderRank2: function() {\n\t\tlet el = this.$(\"#rank2\");\n\t\tlet array = TOURNAMENT.rank2.pluck(\"username\");\n\t\tel.html(\"\");\n\t\tfor (let index = 0; index < array.length; ++index) {\n\t\t\tel.append(this.template({ username: array[index] }));\n\t\t}\n\t},\n\trenderRank3: function() {\n\t\tlet el = this.$(\"#rank3\");\n\t\tlet array = TOURNAMENT.rank3.pluck(\"username\");\n\t\tel.html(\"\");\n\t\tfor (let index = 0; index < array.length; ++index) {\n\t\t\tel.append(this.template({ username: array[index] }));\n\t\t}\n\t},\n\trenderRank4: function() {\n\t\tlet el = this.$(\"#rank4\");\n\t\tlet array = TOURNAMENT.rank4.pluck(\"username\");\n\t\tel.html(\"\");\n\t\tfor (let index = 0; index < array.length; ++index) {\n\t\t\tel.append(this.template({ username: array[index] }));\n\t\t}\n\t},\n\trenderRank5: function() {\n\t\tlet el = this.$(\"#rank5\");\n\t\tlet array = TOURNAMENT.rank5.pluck(\"username\");\n\t\tel.html(\"\");\n\t\tfor (let index = 0; index < array.length; ++index) {\n\t\t\tel.append(this.template({ username: array[index] }));\n\t\t}\n\t}\n});\n\nTOURNAMENT.ViewMatch = Backbone.View.extend({\n\tevents: {\n\t\t\"click input[value='Play']\": \"requestMatch\"\n\t},\n\ttemplate: _.template(\"<%- text %>\"),\n\tinitialize: function() {\n\t\tthis.model.on(\"sync\", this.render, this);\n\t},\n\trender: function() {\n\t\tthis.$(\"p\").html(this.template(this.model.attributes));\n\t},\n\trequestMatch: function() {\n\t\tthis.model.fetch();\n\t}\n});\n\nTOURNAMENT.View = Backbone.View.extend({\n\tel: $(\"#main\"),\n\tinitialize: function() {\n\t\tthis.$el.html($(\"#tournamentTemplate\").html());\n\n\t\tnew TOURNAMENT.ViewLadder({ el: this.$(\"#tournamentRanks\") });\n\t\tnew TOURNAMENT.ViewMatch({ el: this.$(\"#tournamentMatch\"),\n\t\t\t\t\t\t\t\t   model: TOURNAMENT.match });\n\t}\n});\n\nTOURNAMENT.display = function() {\n\twindow.location.hash = \"#tournament\";\n\n\t/* --- chat --- */\n\tunsubAll();\n\t/* ------------ */\n\n\tnew TOURNAMENT.View();\n}\n\n$(\"#nav input[value='Tournament']\").on(\"click\", TOURNAMENT.display);\n\nexport default TOURNAMENT;\n"]},"metadata":{},"sourceType":"module"}