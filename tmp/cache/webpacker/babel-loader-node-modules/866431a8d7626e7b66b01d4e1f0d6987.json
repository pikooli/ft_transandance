{"ast":null,"code":"/* --- chat --- */\nimport { unsubAll } from '../chat/index';\nimport { popWindows } from '../popWindows/popWindows';\n/* ------------ */\n\nvar DEATHMATCH = {};\nDEATHMATCH.ModelCreate = Backbone.Model.extend({\n  url: function url() {\n    return \"/deathmatch/create\";\n  }\n});\nDEATHMATCH.ModelJoin = Backbone.Model.extend({\n  url: function url() {\n    return \"/deathmatch/join\";\n  }\n});\nDEATHMATCH.ModelChallenge = Backbone.Model.extend({\n  url: function url() {\n    return \"/deathmatch/challenge\";\n  }\n});\nDEATHMATCH.create = new DEATHMATCH.ModelCreate();\nDEATHMATCH.join = new DEATHMATCH.ModelJoin();\nDEATHMATCH.challenge = new DEATHMATCH.ModelChallenge();\nDEATHMATCH.CollectionUsers = Backbone.Collection.extend({\n  url: function url() {\n    return \"/deathmatch/index\";\n  }\n});\nDEATHMATCH.users = new DEATHMATCH.CollectionUsers();\nDEATHMATCH.ViewButton = Backbone.View.extend({\n  events: {\n    \"click input[type='button']\": \"button\"\n  },\n  template: _.template(\"<%- text %>\"),\n  initialize: function initialize() {\n    this.model.on(\"sync\", this.render, this);\n  },\n  render: function render() {\n    this.$(\"p\").html(this.template(this.model.attributes));\n    popWindows(this.template(this.model.attributes));\n  },\n  button: function button() {\n    this.model.fetch();\n  }\n});\nDEATHMATCH.ViewUsers = Backbone.View.extend({\n  template: _.template(\"<li><%- username %></li>\"),\n  initialize: function initialize() {\n    this.collection.on(\"sync\", this.render, this);\n    this.collection.fetch();\n  },\n  render: function render() {\n    this.$(\"ul\").html(\"\");\n    this.collection.each(this.renderItem, this);\n  },\n  renderItem: function renderItem(item) {\n    this.$(\"ul\").append(this.template(item.attributes));\n  }\n});\nDEATHMATCH.View = Backbone.View.extend({\n  el: $(\"#main\"),\n  initialize: function initialize() {\n    this.$el.html($(\"#deathmatchTemplate\").html());\n    new DEATHMATCH.ViewButton({\n      el: this.$(\"#deathmatchCreate\"),\n      model: DEATHMATCH.create\n    });\n    new DEATHMATCH.ViewButton({\n      el: this.$(\"#deathmatchJoin\"),\n      model: DEATHMATCH.join\n    });\n    new DEATHMATCH.ViewButton({\n      el: this.$(\"#deathmatchPlay\"),\n      model: DEATHMATCH.challenge\n    });\n    new DEATHMATCH.ViewUsers({\n      el: this.$(\"#deathmatchUsers\"),\n      collection: DEATHMATCH.users\n    });\n  }\n});\n\nDEATHMATCH.display = function () {\n  window.location.hash = \"#deathmatch\";\n  /* --- chat --- */\n\n  unsubAll();\n  /* ------------ */\n\n  new DEATHMATCH.View();\n};\n\n$(\"#nav input[value='Deathmatch']\").on(\"click\", DEATHMATCH.display);\nexport default DEATHMATCH;","map":{"version":3,"sources":["/pong_rails/app/javascript/nav/deathmatch.js"],"names":["unsubAll","popWindows","DEATHMATCH","ModelCreate","Backbone","Model","extend","url","ModelJoin","ModelChallenge","create","join","challenge","CollectionUsers","Collection","users","ViewButton","View","events","template","_","initialize","model","on","render","$","html","attributes","button","fetch","ViewUsers","collection","each","renderItem","item","append","el","$el","display","window","location","hash"],"mappings":"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","sourcesContent":["/* --- chat --- */\nimport {unsubAll} from '../chat/index'\nimport { popWindows } from '../popWindows/popWindows';\n/* ------------ */\n\nlet DEATHMATCH = {};\n\nDEATHMATCH.ModelCreate = Backbone.Model.extend({\n\turl: function() {\n\t\treturn \"/deathmatch/create\";\n\t}\n});\nDEATHMATCH.ModelJoin = Backbone.Model.extend({\n\turl: function() {\n\t\treturn \"/deathmatch/join\";\n\t}\n});\nDEATHMATCH.ModelChallenge = Backbone.Model.extend({\n\turl: function() {\n\t\treturn \"/deathmatch/challenge\";\n\t}\n});\nDEATHMATCH.create = new DEATHMATCH.ModelCreate();\nDEATHMATCH.join = new DEATHMATCH.ModelJoin();\nDEATHMATCH.challenge = new DEATHMATCH.ModelChallenge();\n\nDEATHMATCH.CollectionUsers = Backbone.Collection.extend({\n\turl: function() {\n\t\treturn \"/deathmatch/index\";\n\t}\n});\nDEATHMATCH.users = new DEATHMATCH.CollectionUsers();\n\nDEATHMATCH.ViewButton = Backbone.View.extend({\n\tevents: {\n\t\t\"click input[type='button']\": \"button\"\n\t},\n\ttemplate: _.template(\"<%- text %>\"),\n\tinitialize: function() {\n\t\tthis.model.on(\"sync\", this.render, this);\n\t},\n\trender: function() {\n\t\tthis.$(\"p\").html(this.template(this.model.attributes));\n\t\tpopWindows(this.template(this.model.attributes))\n\t},\n\tbutton: function() {\n\t\tthis.model.fetch();\n\t}\n});\n\nDEATHMATCH.ViewUsers = Backbone.View.extend({\n\ttemplate: _.template(\"<li><%- username %></li>\"),\n\tinitialize: function() {\n\t\tthis.collection.on(\"sync\", this.render, this);\n\t\tthis.collection.fetch();\n\t},\n\trender: function() {\n\t\tthis.$(\"ul\").html(\"\");\n\t\tthis.collection.each(this.renderItem, this);\n\t},\n\trenderItem: function(item) {\n\t\tthis.$(\"ul\").append(this.template(item.attributes));\n\t}\n});\n\nDEATHMATCH.View = Backbone.View.extend({\n\tel: $(\"#main\"),\n\tinitialize: function() {\n\t\tthis.$el.html($(\"#deathmatchTemplate\").html());\n\n\t\tnew DEATHMATCH.ViewButton({\n\t\t\tel: this.$(\"#deathmatchCreate\"),\n\t\t\tmodel: DEATHMATCH.create\n\t\t});\n\n\t\tnew DEATHMATCH.ViewButton({\n\t\t\tel: this.$(\"#deathmatchJoin\"),\n\t\t\tmodel: DEATHMATCH.join\n\t\t});\n\n\t\tnew DEATHMATCH.ViewButton({\n\t\t\tel: this.$(\"#deathmatchPlay\"),\n\t\t\tmodel: DEATHMATCH.challenge\n\t\t});\n\n\t\tnew DEATHMATCH.ViewUsers({\n\t\t\tel: this.$(\"#deathmatchUsers\"),\n\t\t\tcollection: DEATHMATCH.users\n\t\t});\n\t}\n});\n\nDEATHMATCH.display = function() {\n\twindow.location.hash = \"#deathmatch\";\n\n\t/* --- chat --- */\n\tunsubAll();\n\t/* ------------ */\n\n\tnew DEATHMATCH.View();\n}\n\n$(\"#nav input[value='Deathmatch']\").on(\"click\", DEATHMATCH.display);\n\nexport default DEATHMATCH;\n"]},"metadata":{},"sourceType":"module"}