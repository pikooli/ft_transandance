{"ast":null,"code":"import consumer from \"../channels/consumer\";\nimport { ismuted, unsubchat } from './index';\nimport { popWindows, popChoise, popChoise2 } from '../popWindows/popWindows';\nexport function subscribe_to(room, player) {\n  return consumer.subscriptions.create({\n    channel: \"RoomchatChannel\",\n    room: room,\n    speudo: player\n  }, {\n    connected: function connected() {\n      connectChat(room);\n    },\n    disconnected: function disconnected() {},\n    rejected: function rejected() {\n      popWindows(\"you are ban from this chat motherfucker (╬ ಠ益ಠ)s\");\n    },\n    received: function received(data) {\n      receiveChat(data);\n    }\n  });\n}\nexport function connectChat(roomname) {\n  $('#messagerie').html(welcomeMessage());\n  $('#chatname').html(roomname);\n  $('#chat').show();\n  $('#listusername').show();\n  $('#Message').focus();\n}\nexport function receiveChat(data) {\n  var today = new Date();\n  var time = today.getHours() + \":\" + today.getMinutes() + \":\" + today.getSeconds();\n  var chat = document.getElementById('messagerie');\n  if (data.listuser) ft_refreshlistuser(data.listuser);else {\n    if (data.name) {\n      if (ismuted(data.name)) return;\n      $('#messagerie').append(time + ' ' + data.anagram + data.name + \" : \" + data.content + \"<hr/>\");\n    }\n\n    if (data.notive) chat.innerHTML += \"<p style='color:pink;'>\" + time + ' ' + data.notive + \"</p><hr/>\";\n\n    if (data.destroy) {\n      chat.innerHTML += \"<p style='color:pink;'>\" + time + ' ' + data.destroy + \"</p><hr/>\";\n      unsubchat();\n    }\n\n    chat.scrollTop = chat.scrollHeight;\n  }\n}\n\nfunction ft_refreshlistuser(list) {\n  $('#list').html('');\n\n  for (var key in list) {\n    $('#list').append('<p>' + list[key].username + '</p>');\n  }\n}\n\nfunction welcomeMessage() {\n  return \"<p style=\\\"color:green; font-family:arial, sans-serif;\\\">Welcome to the chat<br/>\\t\\t\\t\\\\pm \\\"speudo\\\" to pm someone <br/>\\t\\t\\t\\\\mute \\\"speudo\\\" to mute someone <br/>\\t\\t\\t\\\\unmute \\\"speudo\\\" to unmute someone <br/>\\t\\t\\t\\\\game \\\"speudo\\\" to challenge someone <br/>\\t\\t\\t\\\\profile \\\"speudo\\\" to see the profile <br/>\\t\\t\\t\\\\ban \\\"speudo\\\" to ban someone from this channel (need admin right)<br/>\\t\\t\\t\\\\ban \\\"speudo\\\" \\\"time\\\" to ban someone for a certain time (need admin right)<br/>\\t\\t\\t\\\\unban \\\"speudo\\\" to unban someone (need admin right)<br/>\\t\\t\\t\\\\admin \\\"speudo\\\" to give admin right (need owner right)<br/>\\t\\t\\t\\\\password \\\"newpassword\\\" to change the password of the chat (need owner right)<br/>\\t\\t\\t\\\\unpassword to remove password (need owner right)</p>\";\n}","map":{"version":3,"sources":["/pong_rails/app/javascript/chat/chatlobby.js"],"names":["consumer","ismuted","unsubchat","popWindows","popChoise","popChoise2","subscribe_to","room","player","subscriptions","create","channel","speudo","connected","connectChat","disconnected","rejected","received","data","receiveChat","roomname","$","html","welcomeMessage","show","focus","today","Date","time","getHours","getMinutes","getSeconds","chat","document","getElementById","listuser","ft_refreshlistuser","name","append","anagram","content","notive","innerHTML","destroy","scrollTop","scrollHeight","list","key","username"],"mappings":"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","sourcesContent":["import consumer from \"../channels/consumer\"\nimport {ismuted,unsubchat} from './index'\nimport {popWindows,popChoise, popChoise2} from '../popWindows/popWindows'\n\nexport function subscribe_to(room, player){\n\n\treturn  consumer.subscriptions.create({channel: \"RoomchatChannel\", room: room , speudo: player},{\n\t\t\tconnected() {\n\t\t\t\tconnectChat(room);\n\t\t\t},\n\t\t\tdisconnected() {},\n\t\t\trejected() {\n\t\t\t\tpopWindows(\"you are ban from this chat motherfucker (╬ ಠ益ಠ)s\")\n\t\t\t},\n\t\t\treceived(data) {\n\t\t\t\treceiveChat(data);\n\t\t\t}\n\t});\n}\n\nexport function connectChat(roomname){\n\n\t$('#messagerie').html(welcomeMessage());\n\t$('#chatname').html(roomname)\n\t$('#chat').show();\n\t$('#listusername').show();\n\t$('#Message').focus();\n}\n\nexport function receiveChat(data){\n\n\t\t\tvar today = new Date();\n\t\t\tvar time = today.getHours() + \":\" + today.getMinutes() + \":\" + today.getSeconds();\n\t\t\tvar chat = document.getElementById('messagerie')\n\n\t\t\tif (data.listuser)\n\t\t\t\tft_refreshlistuser(data.listuser);\n\t\t\telse{\n\t\t\t\tif (data.name){\n\t\t\t\t\tif (ismuted(data.name))\n\t\t\t\t\t\treturn\n\t\t\t\t\t$('#messagerie').append(time + ' ' + data.anagram + data.name + \" : \" + data.content + \"<hr/>\");\n\t\t\t\t}\n\t\t\t\tif (data.notive)\n\t\t\t\t\tchat.innerHTML += \"<p style='color:pink;'>\" + time + ' ' + data.notive + \"</p><hr/>\";\n\t\t\t\tif (data.destroy)\n\t\t\t\t{\n\t\t\t\t\t\tchat.innerHTML += \"<p style='color:pink;'>\" + time + ' ' + data.destroy + \"</p><hr/>\";\n\t\t\t\t\t\tunsubchat();\n\t\t\t\t}\n\t\t\t\tchat.scrollTop = chat.scrollHeight;\n\t\t\t}\n\n}\n\nfunction ft_refreshlistuser(list){\n\t$('#list').html('');\n\tfor (let key in list){\n\t\t$('#list').append('<p>' + list[key].username + '</p>');\n\t}\n}\n\nfunction welcomeMessage(){\n\n\treturn '<p style=\"color:green; font-family:arial, sans-serif;\">Welcome to the chat<br/>\\\n\t\t\t\\\\pm \"speudo\" to pm someone <br/>\\\n\t\t\t\\\\mute \"speudo\" to mute someone <br/>\\\n\t\t\t\\\\unmute \"speudo\" to unmute someone <br/>\\\n\t\t\t\\\\game \"speudo\" to challenge someone <br/>\\\n\t\t\t\\\\profile \"speudo\" to see the profile <br/>\\\n\t\t\t\\\\ban \"speudo\" to ban someone from this channel (need admin right)<br/>\\\n\t\t\t\\\\ban \"speudo\" \"time\" to ban someone for a certain time (need admin right)<br/>\\\n\t\t\t\\\\unban \"speudo\" to unban someone (need admin right)<br/>\\\n\t\t\t\\\\admin \"speudo\" to give admin right (need owner right)<br/>\\\n\t\t\t\\\\password \"newpassword\" to change the password of the chat (need owner right)<br/>\\\n\t\t\t\\\\unpassword to remove password (need owner right)</p>';\n\n}\n"]},"metadata":{},"sourceType":"module"}