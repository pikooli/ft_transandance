{"ast":null,"code":"import consumer from \"../channels/consumer\";\nimport { unsub, ismuted } from './index';\nimport { popWindows, popChoise } from '../popWindows/popWindows';\nvar subperso;\nexport function personnalchannel() {\n  var player = $('#playerUsername').html();\n\n  if (subperso) {\n    if (subperso.identifier != '{\"channel\":\"PersochannelChannel\",\"speudo\":\"' + player + '\"}') {\n      subperso.unsubscribe();\n      subscribe(player);\n    }\n  } else subscribe(player);\n}\n\nfunction subscribe(player) {\n  subperso = consumer.subscriptions.create({\n    channel: \"PersochannelChannel\",\n    speudo: player\n  }, {\n    connected: function connected() {},\n    disconnected: function disconnected() {},\n    received: function received(data) {\n      if (data.error) popWindows(data.error);\n      if (data.ban) if ($(\"#chatname\").html() === data.ban) {\n        Message(\"pink\", \" you have been ban, quit the room motherfucker (╬ ಠ益ಠ)s\");\n        unsub();\n      }\n      if (data.banned) if ($(\"#chatname\").html() === data.banned) Message(\"pink\", \" you have been ban, quit the room motherfucker (╬ ಠ益ಠ)s\");\n      if (data.pm) if (!ismuted(data.sender)) popWindows(data.pm);\n      if (data.challenger) if ($(\"#chatname\").html()) if (confirm(data.challenger + 'want to play a game with you')) {\n        $.ajax({\n          url: 'game/create',\n          data: {\n            player1: data.challenger,\n            player2: data.opponent\n          },\n          type: 'GET'\n        });\n      }\n\n      if (data.joingame) {\n        popWindows(data.joingame);\n      }\n    }\n  });\n}\n\nfunction Message(color, content) {\n  var today = new Date();\n  var time = today.getHours() + \":\" + today.getMinutes() + \":\" + today.getSeconds();\n  var chat = document.getElementById('messagerie');\n  chat.innerHTML += \"<p style='color:\" + color + \";'>\" + time + \" \" + content + \"</p><hr/>\";\n  chat.scrollTop = chat.scrollHeight;\n}","map":{"version":3,"sources":["/pong_rails/app/javascript/chat/persochannel_channel.js"],"names":["consumer","unsub","ismuted","popWindows","popChoise","subperso","personnalchannel","player","$","html","identifier","unsubscribe","subscribe","subscriptions","create","channel","speudo","connected","disconnected","received","data","error","ban","Message","banned","pm","sender","challenger","confirm","ajax","url","player1","player2","opponent","type","joingame","color","content","today","Date","time","getHours","getMinutes","getSeconds","chat","document","getElementById","innerHTML","scrollTop","scrollHeight"],"mappings":"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","sourcesContent":["import consumer from \"../channels/consumer\"\nimport {unsub, ismuted} from './index'\nimport {popWindows, popChoise} from '../popWindows/popWindows'\n\nvar subperso;\n\nexport function personnalchannel(){\n\n\tvar player = $('#playerUsername').html()\n\n\tif (subperso){\n\t\t\n\t\tif (subperso.identifier != '{\"channel\":\"PersochannelChannel\",\"speudo\":\"'+ player + '\"}')\t \t\n\t\t{\n\t\t\tsubperso.unsubscribe()\n\t\t\tsubscribe(player);\n\t\t}\n\t}\n\telse\n\t\tsubscribe(player)\n}\n\nfunction subscribe(player){\n\n\tsubperso =  consumer.subscriptions.create({channel: \"PersochannelChannel\", speudo: player}, {\n\n\t\tconnected() {},\n\t\tdisconnected() {},\n\t\treceived(data) {\n\n\t\t\tif (data.error)\n\t\t\t\tpopWindows(data.error)\n\n\t\t\tif (data.ban)\n\t\t\t\t\tif ($(\"#chatname\").html() === data.ban){\n\t\t\t\t\t\tMessage(\"pink\", \" you have been ban, quit the room motherfucker (╬ ಠ益ಠ)s\");\n\t\t\t\t\t\tunsub();\n\t\t\t\t\t}\n\t\t\tif (data.banned)\n\t\t\t\t\tif ($(\"#chatname\").html() === data.banned)\n\t\t\t\t\t\t\tMessage(\"pink\", \" you have been ban, quit the room motherfucker (╬ ಠ益ಠ)s\");\n\t\t\tif (data.pm)\n\t\t\t\tif (!ismuted(data.sender))\n\t\t\t\t\t\tpopWindows(data.pm)\n\t\t\tif (data.challenger)\n\t\t\t\tif ($(\"#chatname\").html())\n\t\t\t\t\t\tif (confirm(data.challenger + 'want to play a game with you'))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t$.ajax({\n\t\t\t\t\t\t\t\t\turl: 'game/create',\n\t\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\tplayer1: data.challenger,\n\t\t\t\t\t\t\t\t\tplayer2: data.opponent\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\ttype: 'GET'\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\tif (data.joingame){\n\t\t\t\tpopWindows(data.joingame)\n\t\t\t}\n\t\t}\n\t})\n}\n\n\nfunction Message(color, content){\n\n\tvar today = new Date();\n\tvar time = today.getHours() + \":\" + today.getMinutes() + \":\" + today.getSeconds();\n\tlet chat = document.getElementById('messagerie')\n\n\tchat.innerHTML += \"<p style='color:\"+ color + \";'>\"+ time + \" \" + content + \"</p><hr/>\";\n\tchat.scrollTop = chat.scrollHeight;\n}\n"]},"metadata":{},"sourceType":"module"}