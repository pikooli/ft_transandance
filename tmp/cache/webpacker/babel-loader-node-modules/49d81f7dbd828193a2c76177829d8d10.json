{"ast":null,"code":"var PONG = {};\nPONG.width = 620;\nPONG.height = 620;\nPONG.fill = \"white\";\nPONG.backgroundFill = \"black\";\n/* ------------ Table ------------ */\n\nPONG.ViewPaddle = Backbone.View.extend({\n  render: function render(attributes) {\n    this.$el.attr(attributes);\n  }\n});\nPONG.ViewBall = Backbone.View.extend({\n  render: function render(attributes) {\n    this.$el.attr(attributes);\n  }\n});\n/* ------------------------ */\n\n/* ------------ Score ------------ */\n\nPONG.ViewScore = Backbone.View.extend({\n  render: function render(score) {\n    this.$(\"#scoreLeft\").html(score.left);\n    this.$(\"#scoreRight\").html(score.right);\n  }\n});\n/* ------------------------ */\n\n/* ------------ PLayers ------------ */\n\nPONG.Collection = Backbone.Collection.extend({\n  url: function url() {\n    return \"/user/players\";\n  }\n});\nPONG.collection = new PONG.Collection();\nPONG.ViewPlayers = Backbone.View.extend({\n  count: 0,\n  playerLeft: null,\n  playerRight: null,\n  template: _.template(\"<li>\" + \"<label><%- username %> [<%- status %>]</label>\" + \"</li>\"),\n  initialize: function initialize() {\n    this.collection.on(\"sync\", this.render, this);\n    this.collection.fetch();\n  },\n  render: function render() {\n    this.count = 0;\n    this.$(\"ul\").html(\"\");\n    this.collection.each(this.renderItem, this);\n  },\n  renderItem: function renderItem(item) {\n    if (this.count == 0) {\n      this.count += 1;\n      this.playerLeft = item.get(\"userid\");\n      this.$(\"ul\").append(this.template(item.attributes));\n    } else if (this.count == 1) {\n      this.count += 1;\n      this.playerRight = item.get(\"userid\");\n      this.$(\"ul\").append(this.template(item.attributes));\n    }\n  }\n});\n/* ------------------------ */\n\nPONG.View = Backbone.View.extend({\n  initialize: function initialize() {\n    this.$el.html($(\"#pongTemplate\").html());\n    PONG.score = new PONG.ViewScore({\n      el: this.$(\"#pongScore\")\n    });\n    this.$(\"svg\").attr({\n      width: PONG.width,\n      height: PONG.height\n    });\n    this.$(\"svg #background\").attr({\n      width: \"100%\",\n      height: \"100%\",\n      fill: PONG.backgroundFill\n    });\n    this.$(\"svg #net\").attr({\n      x1: PONG.width / 2,\n      y1: 0,\n      x2: PONG.width / 2,\n      y2: PONG.height,\n      stroke: PONG.fill\n    });\n    PONG.leftPaddle = new PONG.ViewPaddle({\n      el: this.$(\"svg #leftPaddle\")\n    });\n    PONG.rightPaddle = new PONG.ViewPaddle({\n      el: this.$(\"svg #rightPaddle\")\n    });\n    PONG.ball = new PONG.ViewBall({\n      el: this.$(\"svg #ball\")\n    });\n    PONG.players = new PONG.ViewPlayers({\n      el: this.$(\"#pongPlayers\"),\n      collection: PONG.collection\n    });\n  }\n});\nPONG.view = null;\nexport default PONG;","map":{"version":3,"sources":["/pong_rails/app/javascript/nav/pong.js"],"names":["PONG","width","height","fill","backgroundFill","ViewPaddle","Backbone","View","extend","render","attributes","$el","attr","ViewBall","ViewScore","score","$","html","left","right","Collection","url","collection","ViewPlayers","count","playerLeft","playerRight","template","_","initialize","on","fetch","each","renderItem","item","get","append","el","x1","y1","x2","y2","stroke","leftPaddle","rightPaddle","ball","players","view"],"mappings":"AAAA,IAAIA,IAAI,GAAG,EAAX;AAEAA,IAAI,CAACC,KAAL,GAAa,GAAb;AACAD,IAAI,CAACE,MAAL,GAAc,GAAd;AACAF,IAAI,CAACG,IAAL,GAAY,OAAZ;AACAH,IAAI,CAACI,cAAL,GAAsB,OAAtB;AAEA;;AACAJ,IAAI,CAACK,UAAL,GAAkBC,QAAQ,CAACC,IAAT,CAAcC,MAAd,CAAqB;AACtCC,EAAAA,MAAM,EAAE,gBAASC,UAAT,EAAqB;AAC5B,SAAKC,GAAL,CAASC,IAAT,CAAcF,UAAd;AACA;AAHqC,CAArB,CAAlB;AAMAV,IAAI,CAACa,QAAL,GAAgBP,QAAQ,CAACC,IAAT,CAAcC,MAAd,CAAqB;AACpCC,EAAAA,MAAM,EAAE,gBAASC,UAAT,EAAqB;AAC5B,SAAKC,GAAL,CAASC,IAAT,CAAcF,UAAd;AACA;AAHmC,CAArB,CAAhB;AAKA;;AAEA;;AACAV,IAAI,CAACc,SAAL,GAAiBR,QAAQ,CAACC,IAAT,CAAcC,MAAd,CAAqB;AACrCC,EAAAA,MAAM,EAAE,gBAASM,KAAT,EAAgB;AACvB,SAAKC,CAAL,CAAO,YAAP,EAAqBC,IAArB,CAA0BF,KAAK,CAACG,IAAhC;AACA,SAAKF,CAAL,CAAO,aAAP,EAAsBC,IAAtB,CAA2BF,KAAK,CAACI,KAAjC;AACA;AAJoC,CAArB,CAAjB;AAMA;;AAEA;;AACAnB,IAAI,CAACoB,UAAL,GAAkBd,QAAQ,CAACc,UAAT,CAAoBZ,MAApB,CAA2B;AAC5Ca,EAAAA,GAAG,EAAE,eAAW;AACf,WAAO,eAAP;AACA;AAH2C,CAA3B,CAAlB;AAMArB,IAAI,CAACsB,UAAL,GAAkB,IAAItB,IAAI,CAACoB,UAAT,EAAlB;AAEApB,IAAI,CAACuB,WAAL,GAAmBjB,QAAQ,CAACC,IAAT,CAAcC,MAAd,CAAqB;AACvCgB,EAAAA,KAAK,EAAE,CADgC;AAEvCC,EAAAA,UAAU,EAAE,IAF2B;AAGvCC,EAAAA,WAAW,EAAE,IAH0B;AAIvCC,EAAAA,QAAQ,EAAEC,CAAC,CAACD,QAAF,CAAW,SACf,gDADe,GAEf,OAFI,CAJ6B;AAOvCE,EAAAA,UAAU,EAAE,sBAAW;AACtB,SAAKP,UAAL,CAAgBQ,EAAhB,CAAmB,MAAnB,EAA2B,KAAKrB,MAAhC,EAAwC,IAAxC;AACA,SAAKa,UAAL,CAAgBS,KAAhB;AACA,GAVsC;AAWvCtB,EAAAA,MAAM,EAAE,kBAAW;AAClB,SAAKe,KAAL,GAAa,CAAb;AACA,SAAKR,CAAL,CAAO,IAAP,EAAaC,IAAb,CAAkB,EAAlB;AACA,SAAKK,UAAL,CAAgBU,IAAhB,CAAqB,KAAKC,UAA1B,EAAsC,IAAtC;AACA,GAfsC;AAgBvCA,EAAAA,UAAU,EAAE,oBAASC,IAAT,EAAe;AAC1B,QAAI,KAAKV,KAAL,IAAc,CAAlB,EAAqB;AACpB,WAAKA,KAAL,IAAc,CAAd;AACA,WAAKC,UAAL,GAAkBS,IAAI,CAACC,GAAL,CAAS,QAAT,CAAlB;AACA,WAAKnB,CAAL,CAAO,IAAP,EAAaoB,MAAb,CAAoB,KAAKT,QAAL,CAAcO,IAAI,CAACxB,UAAnB,CAApB;AACA,KAJD,MAKK,IAAI,KAAKc,KAAL,IAAc,CAAlB,EAAqB;AACzB,WAAKA,KAAL,IAAc,CAAd;AACA,WAAKE,WAAL,GAAmBQ,IAAI,CAACC,GAAL,CAAS,QAAT,CAAnB;AACA,WAAKnB,CAAL,CAAO,IAAP,EAAaoB,MAAb,CAAoB,KAAKT,QAAL,CAAcO,IAAI,CAACxB,UAAnB,CAApB;AACA;AACD;AA3BsC,CAArB,CAAnB;AA6BA;;AAEAV,IAAI,CAACO,IAAL,GAAYD,QAAQ,CAACC,IAAT,CAAcC,MAAd,CAAqB;AAChCqB,EAAAA,UAAU,EAAE,sBAAW;AACtB,SAAKlB,GAAL,CAASM,IAAT,CAAcD,CAAC,CAAC,eAAD,CAAD,CAAmBC,IAAnB,EAAd;AAEAjB,IAAAA,IAAI,CAACe,KAAL,GAAa,IAAIf,IAAI,CAACc,SAAT,CAAmB;AAC/BuB,MAAAA,EAAE,EAAE,KAAKrB,CAAL,CAAO,YAAP;AAD2B,KAAnB,CAAb;AAIA,SAAKA,CAAL,CAAO,KAAP,EAAcJ,IAAd,CAAmB;AAAEX,MAAAA,KAAK,EAAED,IAAI,CAACC,KAAd;AAAqBC,MAAAA,MAAM,EAAEF,IAAI,CAACE;AAAlC,KAAnB;AACA,SAAKc,CAAL,CAAO,iBAAP,EAA0BJ,IAA1B,CAA+B;AAC9BX,MAAAA,KAAK,EAAE,MADuB;AAE9BC,MAAAA,MAAM,EAAE,MAFsB;AAG9BC,MAAAA,IAAI,EAAEH,IAAI,CAACI;AAHmB,KAA/B;AAKA,SAAKY,CAAL,CAAO,UAAP,EAAmBJ,IAAnB,CAAwB;AACvB0B,MAAAA,EAAE,EAAGtC,IAAI,CAACC,KAAL,GAAa,CADK;AAEvBsC,MAAAA,EAAE,EAAE,CAFmB;AAGvBC,MAAAA,EAAE,EAAGxC,IAAI,CAACC,KAAL,GAAa,CAHK;AAIvBwC,MAAAA,EAAE,EAAEzC,IAAI,CAACE,MAJc;AAKvBwC,MAAAA,MAAM,EAAE1C,IAAI,CAACG;AALU,KAAxB;AAOAH,IAAAA,IAAI,CAAC2C,UAAL,GAAkB,IAAI3C,IAAI,CAACK,UAAT,CAAoB;AACrCgC,MAAAA,EAAE,EAAE,KAAKrB,CAAL,CAAO,iBAAP;AADiC,KAApB,CAAlB;AAGAhB,IAAAA,IAAI,CAAC4C,WAAL,GAAmB,IAAI5C,IAAI,CAACK,UAAT,CAAoB;AACtCgC,MAAAA,EAAE,EAAE,KAAKrB,CAAL,CAAO,kBAAP;AADkC,KAApB,CAAnB;AAGAhB,IAAAA,IAAI,CAAC6C,IAAL,GAAY,IAAI7C,IAAI,CAACa,QAAT,CAAkB;AAC7BwB,MAAAA,EAAE,EAAE,KAAKrB,CAAL,CAAO,WAAP;AADyB,KAAlB,CAAZ;AAIAhB,IAAAA,IAAI,CAAC8C,OAAL,GAAe,IAAI9C,IAAI,CAACuB,WAAT,CAAqB;AACnCc,MAAAA,EAAE,EAAE,KAAKrB,CAAL,CAAO,cAAP,CAD+B;AAEnCM,MAAAA,UAAU,EAAEtB,IAAI,CAACsB;AAFkB,KAArB,CAAf;AAIA;AAnC+B,CAArB,CAAZ;AAsCAtB,IAAI,CAAC+C,IAAL,GAAY,IAAZ;AAEA,eAAe/C,IAAf","sourcesContent":["var PONG = {};\n\nPONG.width = 620;\nPONG.height = 620;\nPONG.fill = \"white\";\nPONG.backgroundFill = \"black\";\n\n/* ------------ Table ------------ */\nPONG.ViewPaddle = Backbone.View.extend({\n\trender: function(attributes) {\n\t\tthis.$el.attr(attributes);\n\t}\n});\n\nPONG.ViewBall = Backbone.View.extend({\n\trender: function(attributes) {\n\t\tthis.$el.attr(attributes);\n\t}\n});\n/* ------------------------ */\n\n/* ------------ Score ------------ */\nPONG.ViewScore = Backbone.View.extend({\n\trender: function(score) {\n\t\tthis.$(\"#scoreLeft\").html(score.left);\n\t\tthis.$(\"#scoreRight\").html(score.right);\n\t}\n});\n/* ------------------------ */\n\n/* ------------ PLayers ------------ */\nPONG.Collection = Backbone.Collection.extend({\n\turl: function() {\n\t\treturn \"/user/players\";\n\t}\n});\n\nPONG.collection = new PONG.Collection();\n\nPONG.ViewPlayers = Backbone.View.extend({\n\tcount: 0,\n\tplayerLeft: null,\n\tplayerRight: null,\n\ttemplate: _.template(\"<li>\" +\n\t\t\t\t\t\t \"<label><%- username %> [<%- status %>]</label>\" +\n\t\t\t\t\t\t \"</li>\"),\n\tinitialize: function() {\n\t\tthis.collection.on(\"sync\", this.render, this);\n\t\tthis.collection.fetch();\n\t},\n\trender: function() {\n\t\tthis.count = 0;\n\t\tthis.$(\"ul\").html(\"\");\n\t\tthis.collection.each(this.renderItem, this);\n\t},\n\trenderItem: function(item) {\n\t\tif (this.count == 0) {\n\t\t\tthis.count += 1;\n\t\t\tthis.playerLeft = item.get(\"userid\");\n\t\t\tthis.$(\"ul\").append(this.template(item.attributes));\n\t\t}\n\t\telse if (this.count == 1) {\n\t\t\tthis.count += 1;\n\t\t\tthis.playerRight = item.get(\"userid\");\n\t\t\tthis.$(\"ul\").append(this.template(item.attributes));\n\t\t}\n\t}\n});\n/* ------------------------ */\n\nPONG.View = Backbone.View.extend({\n\tinitialize: function() {\n\t\tthis.$el.html($(\"#pongTemplate\").html());\n\n\t\tPONG.score = new PONG.ViewScore({\n\t\t\tel: this.$(\"#pongScore\")\n\t\t});\n\n\t\tthis.$(\"svg\").attr({ width: PONG.width, height: PONG.height });\n\t\tthis.$(\"svg #background\").attr({\n\t\t\twidth: \"100%\",\n\t\t\theight: \"100%\",\n\t\t\tfill: PONG.backgroundFill\n\t\t});\n\t\tthis.$(\"svg #net\").attr({\n\t\t\tx1: (PONG.width / 2),\n\t\t\ty1: 0,\n\t\t\tx2: (PONG.width / 2),\n\t\t\ty2: PONG.height,\n\t\t\tstroke: PONG.fill\n\t\t});\n\t\tPONG.leftPaddle = new PONG.ViewPaddle({\n\t\t\tel: this.$(\"svg #leftPaddle\")\n\t\t});\n\t\tPONG.rightPaddle = new PONG.ViewPaddle({\n\t\t\tel: this.$(\"svg #rightPaddle\")\n\t\t});\n\t\tPONG.ball = new PONG.ViewBall({\n\t\t\tel: this.$(\"svg #ball\")\n\t\t});\n\n\t\tPONG.players = new PONG.ViewPlayers({\n\t\t\tel: this.$(\"#pongPlayers\"),\n\t\t\tcollection: PONG.collection\n\t\t});\n\t}\n});\n\nPONG.view = null;\n\nexport default PONG;\n"]},"metadata":{},"sourceType":"module"}